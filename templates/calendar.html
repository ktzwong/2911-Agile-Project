<!DOCTYPE html>
<html>
<head>
  <title>Calendar</title>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="{{ url_for('static', filename='calendar.css') }}">
</head>
<body>
  <h1>ğŸ“… My Calendar</h1>
  <nav>
    <ul>
      <li><a href="{{ url_for('home') }}">ğŸ  Home</a></li>
      
      <li><a href="{{ url_for('notes_view') }}">ğŸ“ Notes</a></li>
    </ul>
  </nav>
  <div id="calendar"></div>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const calendarEl = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: '/items',

   
      dateClick: function(info) {
        const desc = prompt("Enter item description:");
        if (desc) {
          fetch('/items', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              description: desc,
              date: info.dateStr
            })
          })
          .then(response => {
            if (response.ok) {
              calendar.refetchEvents(); // refresh calendar
            } else {
              alert("Failed to save item.");
            }
          });
        }
      },

      eventClick: function(info) {
        const noteId = info.event.extendedProps.note_id;
        if (noteId) {
          window.location.href = `/notes?id=${noteId}`;
        }
      }
    });
    calendar.render();
  });
  </script>
</body>
</html>

 